<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>about</title>
    <script type="module" crossorigin src="/ZoHue/assets/main-CSLZXGsV.js"></script>
    <link rel="stylesheet" crossorigin href="/ZoHue/assets/main-BvCYuanL.css">
  </head>
  <body>
    <header>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@tabler/icons-webfont@latest/dist/tabler-icons.min.css" />
</header>
<nav class="navbar navbar-sticky navbar-expand-lg navbar-light bg-light border-bottom border-natural-300 py-3">
    <div class="container d-flex align-items-center">
        <!-- Logo -->
        <a class="navbar-brand logo-picture" href="index.html">
            <img src="/ZoHue/assets/logo-DcaTSJQR.svg" alt="logo">
        </a>

        <!-- ÊâãÊ©üÁâàÁôªÂÖ•ÊåâÈàï -->
        <a href="#" class="d-lg-none ms-auto me-2">
            <button class="btn btn-secondaryL fw-semibold btn-mobile">ÁôªÂÖ•/Ë®ªÂÜä</button>
        </a>

        <!-- Êº¢Â†°ÈÅ∏ÂñÆ -->
        <button class="navbar-toggler border-0 d-lg-none" type="button" data-bs-toggle="collapse"
            data-bs-target="#navbarSupportedContent">
            <span class="navbar-toggler-icon"></span>
        </button>

        <!-- Êë∫ÁñäÈÅ∏ÂñÆ -->
        <div class="collapse navbar-collapse navbarList" id="navbarSupportedContent">
            <ul class="navbar-nav ms-auto mb-2 mb-lg-0 align-items-center">
                <li class="nav-item">
                    <a class="navbarList-link nav-link px-3 text-natural-950 text-decoration-none link-primary" href="#">Â∞àÊ°àÊé¢Á¥¢</a>
                </li>
                <li class="nav-item">
                    <a class="navbarList-link nav-link px-3 text-natural-950 text-decoration-none link-primary" href="#">ÈóúÊñºÊàëÂÄë</a>
                </li>
                <li class="nav-item">
                    <a class="navbarList-link nav-link px-3 text-natural-950 text-decoration-none link-primary" href="#"
                        onclick="openLightbox()">ÂøóÂ∑•ÊïÖ‰∫ã</a>
                </li>
                <li class="nav-item">
                    <a class="navbarList-link nav-link px-3 text-natural-950 text-decoration-none link-primary" href="#">Â∏∏Ë¶ãÂïèÈ°å</a>
                </li>
                <!-- Ê°åÈù¢ÁâàÁôªÂÖ•ÊåâÈàï -->
                <li class="nav-item d-none d-lg-block ms-5">
                    <a href="#">
                        <button class="btn btn-secondaryL fw-semibold">ÁôªÂÖ•/Ë®ªÂÜä</button>
                    </a>
                </li>
            </ul>
        </div>
    </div>
</nav>
<!-- ÁáàÁÆ± -->
<div class="lightbox" id="lightbox">
    <div class="lightbox-content">
        <button class="close-button" onclick="closeLightbox()">&times;</button>

        <!-- ÂøóÂ∑•ÊïÖ‰∫ãÁâÜÂÖßÂÆπ -->
        <div class="story-wall">
            <!-- ËÉåÊôØË£ùÈ£æÁ∑öÊ¢ù -->
            <div class="bg-lines">
                <div class="bg-line bg-line-1"></div>
                <div class="bg-line bg-line-2"></div>
                <div class="bg-line bg-line-3"></div>
                <div class="bg-line bg-line-4"></div>
                <div class="bg-line bg-line-5"></div>
            </div>

            <!-- Âè≥ÂÅ¥Âõ∫ÂÆöÈ†ÅÈù¢ÊåáÁ§∫Âô® -->
            <div class="page-indicators d-none d-md-flex" id="pageIndicators">
                <!-- ÂãïÊÖãÁîüÊàê -->
            </div>

            <div class="story-container" id="container">
                <!-- È†ÇÈÉ®Ê®ôÈ°å -->
                <header class="storyheader">
                    <div class="header-decoration">
                        <div class="header-line"></div>
                        <h1 class="header-title">ÂøóÂ∑•ÊïÖ‰∫ãÁâÜ</h1>
                        <div class="header-line"></div>
                    </div>
                    <p class="header-subtitle">VOLUNTEER STORIES</p>
                </header>

                <!-- ‰∏ªË¶ÅÂÖßÂÆπÂçÄ -->
                <div class="content">
                    <!-- Â∑¶ÂÅ¥ÊïÖ‰∫ãÂÖßÂÆπ -->
                    <div class="story-content" id="storyContent">
                        <!-- Á´†ÁØÄÊ®ôÈ°å -->
                        <div class="chapter-title">
                            <div class="chapter-header">
                                <h2 class="chapter-name" id="chapterName"></h2>
                                <span class="chapter-subtitle" id="chapterSubtitle"></span>
                            </div>
                            <div class="chapter-line"></div>
                        </div>

                        <!-- ÂøóÂ∑•Ë≥áË®ä -->
                        <div class="volunteer-info">
                            <div class="volunteer-image" id="volunteerImage"></div>
                            <div>
                                <h3 class="volunteer-name" id="volunteerName"></h3>
                                <p class="volunteer-role" id="volunteerRole"></p>
                            </div>
                        </div>

                        <!-- ÊïÖ‰∫ãÂÖßÂÆπ -->
                        <div class="story-text">
                            <div class="quote-icon">"</div>
                            <p class="story-paragraph" id="storyParagraph"></p>
                            <p class="story-quote" id="storyQuote"></p>
                        </div>

                        <!-- Áµ±Ë®àÊï∏Êìö -->
                        <div class="stats">
                            <div class="stat-item">
                                <div class="stat-icon">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                        stroke-width="2">
                                        <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                                        <circle cx="9" cy="7" r="4"></circle>
                                        <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                                        <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                                    </svg>
                                </div>
                                <p class="stat-value" id="statStudents"></p>
                                <p class="stat-label">‰ΩçÂ≠∏Áîü</p>
                            </div>
                            <div class="stat-item">
                                <div class="stat-icon">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                        stroke-width="2">
                                        <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path>
                                        <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path>
                                    </svg>
                                </div>
                                <p class="stat-value" id="statHours"></p>
                                <p class="stat-label">ÊïôÂ≠∏ÊôÇÊï∏</p>
                            </div>
                            <div class="stat-item">
                                <div class="stat-icon">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                        stroke-width="2">
                                        <path
                                            d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z">
                                        </path>
                                    </svg>
                                </div>
                                <p class="stat-value" id="statYears"></p>
                                <p class="stat-label">Âπ¥Ë≥áÊ≠∑</p>
                            </div>
                        </div>
                    </div>

                    <!-- Âè≥ÂÅ¥ÂúñÁâáÊ°ÜÊû∂ -->
                    <div class="visual-content" id="visualContent">
                        <div class="visual-frame">
                            <!-- Â§ñÊ°Ü -->
                            <div class="frame-outer"></div>
                            <!-- ÂÖßÊ°Ü -->
                            <div class="frame-inner"></div>
                            <!-- ËßíËêΩË£ùÈ£æ -->
                            <div class="frame-corner frame-corner-tl"></div>
                            <div class="frame-corner frame-corner-tr"></div>
                            <div class="frame-corner frame-corner-bl"></div>
                            <div class="frame-corner frame-corner-br"></div>

                            <!-- ‰∏≠ÂøÉÂÖßÂÆπ -->
                            <div class="visual-center">
                                <img src="" alt="Story Image" id="storyImage" class="story-image">
                                <div class="visual-label">
                                </div>
                            </div>

                            <!-- Ë£ùÈ£æÁ∑öÊ¢ù -->
                            <div class="frame-line-h"></div>
                            <div class="frame-line-v"></div>
                        </div>
                    </div>
                </div>

                <!-- Â∫ïÈÉ®Â∞éËà™ÊéßÂà∂ÂçÄ -->
                <div class="navigation-area">
                    <!-- ÊªæÂãïÊèêÁ§∫ -->
                    <div class="scroll-hint d-none d-md-flex" id="scrollHint">
                        <div class="scroll-hint-content">
                            <p class="scroll-text">SCROLL</p>
                            <div class="scroll-line"></div>
                        </div>
                    </div>

                    <!-- Â∫ïÈÉ®Â∞éËà™ -->
                    <div class="navigation">
                        <button class="nav-button" id="prevButton" aria-label="Previous story">
                            <svg class="nav-icon" width="20" height="20" viewBox="0 0 24 24" fill="none"
                                stroke="currentColor" stroke-width="2">
                                <path d="M15 18l-6-6 6-6" />
                            </svg>
                        </button>

                        <div class="page-counter">
                            <span class="page-current" id="pageCurrent">1</span>
                            <span class="page-separator">/</span>
                            <span class="page-total" id="pageTotal">6</span>
                        </div>

                        <button class="nav-button" id="nextButton" aria-label="Next story">
                            <svg class="nav-icon" width="20" height="20" viewBox="0 0 24 24" fill="none"
                                stroke="currentColor" stroke-width="2">
                                <path d="M9 18l6-6-6-6" />
                            </svg>
                        </button>
                    </div>

                    <!-- Â∫ïÈÉ®Ë£ùÈ£æ -->
                    <div class="storyfooter">
                        <div class="footer-decoration">
                            <div class="footer-line"></div>
                            <p class="footer-text">ÊÑõÂøÉÁÑ°Áïå ¬∑ ÊïôËÇ≤ÁÑ°Èôê</p>
                            <div class="footer-line"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    // ÂøóÂ∑•ÊïÖ‰∫ãÊï∏Êìö
    const stories = [
        {
            id: 1,
            title: "ÂàùÂøÉ",
            subtitle: "„ÅØ„Åò„ÇÅ",
            volunteer: "ÊûóÁæéÁé≤",
            role: "Ëã±Ë™ûÊïôÂ≠∏ÂøóÂ∑•",
            story: "Á¨¨‰∏ÄÊ¨°Ë∏èÈÄ≤ÂÅèÈÑâÂ∞èÂ≠∏ÔºåÁúãË¶ãÂ≠©Â≠êÂÄëÊ∏¥ÊúõÂ≠∏ÁøíÁöÑÁúºÁ•ûÔºåÊàëÁü•ÈÅìÈÄôÂ∞±ÊòØÊàëÊÉ≥ÂÅöÁöÑ‰∫ã„ÄÇ",
            quote: "ÊïôËÇ≤‰∏çÊòØÂ°´ÊªøÊ∞¥Ê°∂ÔºåËÄåÊòØÈªûÁáÉÁÅ´ÁÑ∞„ÄÇ",
            image: "üå∏",
            imageUrl: "https://picsum.photos/id/180/767/470",
            stats: { students: 32, hours: 128, years: 2 },
        },
        {
            id: 2,
            title: "ÊàêÈï∑",
            subtitle: "„Åõ„ÅÑ„Å°„Çá„ÅÜ",
            volunteer: "Èô≥ÂøóÊòé",
            role: "Á®ãÂºèË®≠Ë®àÂ∞éÂ∏´",
            story: "Âæû‰∏ÄÂÄãÂÆ≥ÁæûÁöÑÂ∑•Á®ãÂ∏´ÔºåÂà∞ËÉΩÂ§†Á´ôÂú®Ë¨õÂè∞‰∏äÂàÜ‰∫´Áü•Ë≠òÔºåÈÄôÊÆµÊóÖÁ®ãÊîπËÆä‰∫ÜÊàë„ÄÇ",
            quote: "Âú®ÊïôÂ≠∏‰∏≠ÔºåÊàëÂÄë‰∏çÂè™ÊòØËÄÅÂ∏´ÔºåÊõ¥ÊòØÊ∞∏ÈÅ†ÁöÑÂ≠∏Áîü„ÄÇ",
            image: "üåø",
            imageUrl: "https://picsum.photos/id/160/767/470",
            stats: { students: 45, hours: 256, years: 3 },
        },
        {
            id: 3,
            title: "ÊÑüÂãï",
            subtitle: "„Åã„Çì„Å©„ÅÜ",
            volunteer: "ÁéãÈõÖÁê™",
            role: "ÁæéË°ìÂâµ‰ΩúËÄÅÂ∏´",
            story: "Áï∂Â≠∏ÁîüÁ¨¨‰∏ÄÊ¨°ÂÆåÊàê‰ΩúÂìÅÊôÇÁöÑÁ¨ëÂÆπÔºåÊòØÊàëÁπºÁ∫åÂâçÈÄ≤ÁöÑÊúÄÂ§ßÂãïÂäõ„ÄÇ",
            quote: "ËóùË°ìËÆìÂ≠©Â≠êÁúãË¶ã‰∏ñÁïåÁöÑÁæéÂ•ΩÔºå‰πüÁúãË¶ãËá™Â∑±ÁöÑÂèØËÉΩ„ÄÇ",
            image: "üé®",
            imageUrl: "https://picsum.photos/id/184/767/470",
            stats: { students: 28, hours: 96, years: 1 },
        },
        {
            id: 4,
            title: "Â†ÖÊåÅ",
            subtitle: "„Åë„Çì„Åò",
            volunteer: "ÊùéÂª∫ËèØ",
            role: "Êï∏Â≠∏ËºîÂ∞éËÄÅÂ∏´",
            story: "Âç≥‰ΩøÈÅáÂà∞Êå´ÊäòÔºåÁúãÂà∞Â≠∏ÁîüÈÄ≤Ê≠•ÁöÑÈÇ£‰∏ÄÂàªÔºåÊâÄÊúâÁöÑÂä™ÂäõÈÉΩÂÄºÂæó‰∫Ü„ÄÇ",
            quote: "Â†ÖÊåÅ‰∏çÊòØÂõ†ÁÇ∫ÁúãÂà∞Â∏åÊúõÊâçÂ†ÖÊåÅÔºåËÄåÊòØÂ†ÖÊåÅ‰∫ÜÊâçÁúãÂà∞Â∏åÊúõ„ÄÇ",
            image: "üí™",
            imageUrl: "https://picsum.photos/id/188/767/470",
            stats: { students: 38, hours: 180, years: 4 },
        },
        {
            id: 5,
            title: "Â∏åÊúõ",
            subtitle: "„Åç„Åº„ÅÜ",
            volunteer: "ÂºµÊ∑ëËä¨",
            role: "Èñ±ËÆÄÊé®Âª£ÂøóÂ∑•",
            story: "ÊØè‰∏ÄÊú¨Êõ∏ÈÉΩÊòØ‰∏ÄÊâáÁ™óÔºåËÆìÂ≠©Â≠êÂÄëÁúãË¶ãÊõ¥Âª£ÈóäÁöÑ‰∏ñÁïå„ÄÇ",
            quote: "Èñ±ËÆÄÊòØÁµ¶Â≠©Â≠êÊúÄÂ•ΩÁöÑÁ¶ÆÁâ©ÔºåÁü•Ë≠òÊòØ‰ªñÂÄëÈ£õÁøîÁöÑÁøÖËÜÄ„ÄÇ",
            image: "üìö",
            imageUrl: "https://picsum.photos/id/24/767/470",
            stats: { students: 52, hours: 320, years: 5 },
        },
        {
            id: 6,
            title: "ÂÇ≥Êâø",
            subtitle: "„Åß„Çì„Åó„Çá„ÅÜ",
            volunteer: "ÂäâÊ∞∏Á••",
            role: "Ë≥áÊ∑±ÂøóÂ∑•Â∞éÂ∏´",
            story: "ÁúãËëóÊñ∞ÂøóÂ∑•ÂÄëÊàêÈï∑ÔºåÂ∞±ÂÉèÁúãË¶ãËá™Â∑±Áï∂Âπ¥ÁöÑÊ®°Ê®£ÔºåÈÄô‰ªΩÊÑõÊúÉ‰∏ÄÁõ¥ÂÇ≥‰∏ãÂéª„ÄÇ",
            quote: "ÊúÄÂ•ΩÁöÑÂÇ≥Êâø‰∏çÊòØÁµ¶‰∫àÔºåËÄåÊòØÂïüÁôº‰ªñ‰∫∫‰πüÊàêÁÇ∫Áµ¶‰∫àËÄÖ„ÄÇ",
            image: "üåü",
            imageUrl: "https://picsum.photos/id/177/767/470",
            stats: { students: 120, hours: 500, years: 8 },
        },
    ];

    // ÊïÖ‰∫ãÁâÜËÆäÊï∏
    let currentSection = 0;
    let isAnimating = false;
    let isScrolling = false;
    let lastScrollTime = 0;
    let touchStartY = 0;
    let elements = {};

    // ÁáàÁÆ±ÊéßÂà∂ - Â§ñÈÉ®Ë™øÁî®
    
    // ÈñãÂïüÁáàÁÆ±
    function openLightbox() {
        const lightbox = document.getElementById('lightbox');
        if (!lightbox) return;

        lightbox.style.display = 'flex';
        setTimeout(() => {
            lightbox.classList.add('active');
        }, 10);

        if (!window.storyWallInitialized) {
            initStoryWall();
            window.storyWallInitialized = true;
        }
    }
    // ÈóúÈñâÁáàÁÆ±
    function closeLightbox() {
        const lightbox = document.getElementById('lightbox');
        if (!lightbox) return;

        // 1. Âä†ÂÖ• .closing ÁãÄÊÖã
        lightbox.classList.add('closing');
        // 2. ÁßªÈô§ activeÔºàÈñãÂßãÁ∏ÆÂ∞èÂãïÁï´Ôºâ
        lightbox.classList.remove('active');
        // 3. Áõ£ËÅΩÂãïÁï´ÂÆåÁï¢ÂæåÊâçÈö±Ëóè
        const lightboxContent = lightbox.querySelector('.lightbox-content');
        if (lightboxContent) {
            lightboxContent.addEventListener('animationend', function handler() {
                lightbox.style.display = 'none';
                lightbox.classList.remove('closing');
                // ÁßªÈô§Áõ£ËÅΩÔºåÈÅøÂÖçÈáçË§á
                lightboxContent.removeEventListener('animationend', handler);
            });
        }
    }

    // ÂàùÂßãÂåñDOMÂÖÉÁ¥†
    function initElements() {
        elements = {
            chapterName: document.querySelector("#chapterName"),
            chapterSubtitle: document.querySelector("#chapterSubtitle"),
            volunteerImage: document.querySelector("#volunteerImage"),
            volunteerName: document.querySelector("#volunteerName"),
            volunteerRole: document.querySelector("#volunteerRole"),
            storyParagraph: document.querySelector("#storyParagraph"),
            storyQuote: document.querySelector("#storyQuote"),
            statStudents: document.querySelector("#statStudents"),
            statHours: document.querySelector("#statHours"),
            statYears: document.querySelector("#statYears"),
            pageCurrent: document.querySelector("#pageCurrent"),
            pageTotal: document.querySelector("#pageTotal"),
            scrollHint: document.querySelector("#scrollHint"),
            storyContent: document.querySelector("#storyContent"),
            visualContent: document.querySelector("#visualContent"),
            pageIndicators: document.querySelector("#pageIndicators"),
            prevButton: document.querySelector("#prevButton"),
            nextButton: document.querySelector("#nextButton"),
            container: document.querySelector("#container"),
        };
    }

    function preloadImages() {
        stories.forEach((story) => {
            const img = new Image();
            img.src = story.imageUrl;
        });
    }

    function initStoryWall() {
        initElements();
        createPageIndicators();
        preloadImages();
        updateContent();
        bindEvents();
        if (elements.pageTotal) {
            elements.pageTotal.textContent = stories.length;
        }
    }

    function createPageIndicators() {
        if (!elements.pageIndicators) return;

        elements.pageIndicators.innerHTML = "";
        stories.forEach((story, index) => {
            const indicator = document.createElement("button");
            indicator.className = "indicator";
            indicator.setAttribute("aria-label", `Go to story ${index + 1}`);
            indicator.innerHTML = `
            <div class="indicator-dot"></div>
            <span class="indicator-label">${story.title}</span>
        `;
            indicator.addEventListener("click", () => handleSectionChange(index));
            elements.pageIndicators.appendChild(indicator);
        });
    }

    function updateContent() {
        const story = stories[currentSection];

        if (elements.chapterName) elements.chapterName.textContent = story.title;
        if (elements.chapterSubtitle) elements.chapterSubtitle.textContent = story.subtitle;
        if (elements.volunteerImage) elements.volunteerImage.textContent = story.image;
        if (elements.volunteerName) elements.volunteerName.textContent = story.volunteer;
        if (elements.volunteerRole) elements.volunteerRole.textContent = story.role;
        if (elements.storyParagraph) elements.storyParagraph.textContent = story.story;
        if (elements.storyQuote) elements.storyQuote.textContent = `‚Äî ${story.quote}`;
        if (elements.statStudents) elements.statStudents.textContent = story.stats.students;
        if (elements.statHours) elements.statHours.textContent = story.stats.hours;
        if (elements.statYears) elements.statYears.textContent = story.stats.years;
        if (elements.pageCurrent) elements.pageCurrent.textContent = currentSection + 1;

        const storyImage = document.querySelector("#storyImage");
        if (storyImage && story.imageUrl) {
            storyImage.style.opacity = "0.3";

            let loadingElement = document.querySelector(".image-loading");
            if (!loadingElement) {
                loadingElement = document.createElement("div");
                loadingElement.className = "image-loading";
                loadingElement.innerHTML = `
            <div class="loading-spinner"></div>
            <div class="loading-text">ËºâÂÖ•‰∏≠...</div>
        `;
                loadingElement.style.cssText = `
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
            z-index: 10;
        `;

                storyImage.parentElement.style.position = "relative";
                storyImage.parentElement.appendChild(loadingElement);
            }
            loadingElement.style.display = "flex";

            const tempImg = new Image();
            tempImg.onload = function () {
                storyImage.src = this.src;
                storyImage.style.opacity = "1";
                loadingElement.style.display = "none";
            };
            tempImg.onerror = function () {
                storyImage.style.opacity = "1";
                loadingElement.querySelector(".loading-text").textContent = "ËºâÂÖ•Â§±Êïó";
                loadingElement.querySelector(".loading-spinner").style.display = "none";
                setTimeout(() => {
                    loadingElement.style.display = "none";
                }, 2000);
            };
            tempImg.src = story.imageUrl;
            storyImage.alt = `${story.title} - ${story.volunteer}`;
        }

        updatePageIndicators();

        if (elements.scrollHint) {
            if (currentSection === 0) {
                elements.scrollHint.classList.remove("hidden");
            } else {
                elements.scrollHint.classList.add("hidden");
            }
        }
    }

    function updatePageIndicators() {
        if (!elements.pageIndicators) return;

        const indicators = elements.pageIndicators.querySelectorAll(".indicator");
        indicators.forEach((indicator, index) => {
            if (index === currentSection) {
                indicator.classList.add("active");
            } else {
                indicator.classList.remove("active");
            }
        });
    }

    function handleSectionChange(index) {
        if (isAnimating || isScrolling) return;

        const newIndex = Math.max(0, Math.min(stories.length - 1, index));

        if (newIndex === currentSection) return;

        isAnimating = true;

        if (elements.storyContent) elements.storyContent.classList.add("animating");
        if (elements.visualContent) elements.visualContent.classList.add("animating");

        setTimeout(() => {
            currentSection = newIndex;
            updateContent();

            setTimeout(() => {
                if (elements.storyContent) elements.storyContent.classList.remove("animating");
                if (elements.visualContent) elements.visualContent.classList.remove("animating");
                isAnimating = false;
            }, 100);
        }, 300);
    }

    function handlePrev() {
        const newIndex = currentSection === 0 ? stories.length - 1 : currentSection - 1;
        handleSectionChange(newIndex);
    }

    function handleNext() {
        const newIndex = currentSection === stories.length - 1 ? 0 : currentSection + 1;
        handleSectionChange(newIndex);
    }

    function handleWheel(e) {
        const lightbox = document.getElementById('lightbox');
        if (!lightbox || !lightbox.classList.contains('active')) return;

        e.preventDefault();
        e.stopPropagation();

        const now = Date.now();
        if (now - lastScrollTime < 500) return;

        if (isScrolling || isAnimating) return;

        lastScrollTime = now;

        if (e.deltaY > 0) {
            handleNext();
        } else {
            handlePrev();
        }
    }

    function handleKeydown(e) {
        const lightbox = document.getElementById('lightbox');
        if (!lightbox || !lightbox.classList.contains('active')) return;

        if (isAnimating || isScrolling) return;

        switch (e.key) {
            case "ArrowLeft":
            case "ArrowUp":
                e.preventDefault();
                handlePrev();
                break;
            case "ArrowRight":
            case "ArrowDown":
                e.preventDefault();
                handleNext();
                break;
            case "Escape":
                e.preventDefault();
                closeLightbox();
                break;
        }
    }

    function handleTouchStart(e) {
        touchStartY = e.touches[0].clientY;
    }

    function handleTouchEnd(e) {
        if (isAnimating || isScrolling) return;

        const touchEndY = e.changedTouches[0].clientY;
        const diff = touchStartY - touchEndY;

        if (Math.abs(diff) > 50) {
            if (diff > 0) {
                handleNext();
            } else {
                handlePrev();
            }
        }
    }

    function bindEvents() {
        if (elements.prevButton) elements.prevButton.addEventListener("click", handlePrev);
        if (elements.nextButton) elements.nextButton.addEventListener("click", handleNext);

        window.addEventListener("wheel", handleWheel, { passive: false });
        document.addEventListener("wheel", handleWheel, { passive: false });
        if (elements.container) {
            elements.container.addEventListener("wheel", handleWheel, { passive: false });
        }

        document.addEventListener("keydown", handleKeydown);

        if (elements.container) {
            elements.container.addEventListener("touchstart", handleTouchStart, { passive: true });
            elements.container.addEventListener("touchend", handleTouchEnd, { passive: true });
        }

        const lightbox = document.getElementById('lightbox');
        if (lightbox) {
            lightbox.addEventListener('click', function (e) {
                if (e.target === this) {
                    closeLightbox();
                }
            });
        }
    }

    // Â∞áÂáΩÊï∏Êö¥Èú≤Âà∞ÂÖ®ÂüüÔºå‰æõheaderË™øÁî®
    window.openLightbox = openLightbox;
    window.closeLightbox = closeLightbox;
</script>    <h1>ÊàëÊòØabout</h1>
    <footer class="container-fluid">
    <img src="/ZoHue/assets/Exclude-CI-SP6fK.svg" alt="Exclude" class="Exclude d-none d-md-block">
    <img src="/ZoHue/assets/Exclude-small-DhFM4DXZ.svg" alt="Exclude" class="Exclude d-block d-md-none">
    <div class="container mx-312">
        <div class="row footer-columns">
            <!-- Logo ÂçÄÂ°äÔºå‰ΩîÊìö‰∏ÄÂÆöÂØ¨Â∫¶ -->
            <div class="col-lg-2 col-md-12 mb-4">
                <a href="index.html">
                    <img src="/ZoHue/assets/logo-DcaTSJQR.svg" alt="logo" class="footer-logo">
                </a>
            </div>

            <div class="col-lg-10 col-md-12">
                <div class="row align-items-start">
                    <!-- Âπ≥Âè∞ÂçÄÂ°ä -->
                    <div class="col-lg-3 col-md-6 col-6 platform">
                        <h6 class="text-natural-500 fw-normal pb-4 pe-4 ps-4 mb-2 custom-border fs-14">Âπ≥Âè∞</h6>
                        <div class="row g-2">
                            <div class="col-6">
                                <a href="#"
                                    class="text-natural-950 text-decoration-none link-primary d-block footer-link ps-4 pe-4">ÈóúÊñºÊàëÂÄë</a>
                                <a href="userAgreement.html"
                                    class="text-natural-950 text-decoration-none link-primary d-block footer-link ps-4 pe-4">‰ΩøÁî®Ê¢ùÊ¨æ</a>
                            </div>
                            <div class="col-6">
                                <a href="privacy.html"
                                    class="text-natural-950 text-decoration-none link-primary d-block footer-link ps-4 pe-4">Èö±ÁßÅÊ¨äÊîøÁ≠ñ</a>
                                <a href="#"
                                    class="text-natural-950 text-decoration-none link-primary d-block footer-link ps-4 pe-4">ËÅØÁµ°ÊàëÂÄë</a>
                            </div>
                        </div>
                    </div>

                    <!-- ÂøóÂ∑•ÂçÄÂ°ä -->
                    <div class="col-lg-3 col-md-6 col-6">
                        <h6 class="text-natural-500 fw-normal pb-4 pe-4 ps-4 mb-2 custom-border fs-14">ÂøóÂ∑•</h6>
                        <ul class="list-unstyled">
                            <li class=""><a href="#"
                                    class="text-natural-950 text-decoration-none link-primary footer-link ps-4 pe-4 fs-7">Â∞àÊ°àÂàóË°®</a>
                            </li>
                            <li class=""><a href="#" onclick="openLightbox()"
                                    class="text-natural-950 text-decoration-none link-primary footer-link ps-4 pe-4">ÂøóÂ∑•ÊïÖ‰∫ã</a>
                            </li>
                        </ul>
                    </div>

                    <!-- ÊèêÊ°àÊñπÂçÄÂ°ä -->
                    <div class="col-lg-3 col-md-6 col-6">
                        <h6 class="text-natural-500 fw-normal pb-4 pe-4 ps-4 mb-2 custom-border fs-14">ÊèêÊ°àÊñπ</h6>
                        <ul class="list-unstyled">
                            <li class=""><a href="#"
                                    class="text-natural-950 text-decoration-none link-primary footer-link ps-4 pe-4">ÊÑüË¨ùÁâÜ</a>
                            </li>
                            <li class=""><a href="#"
                                    class="text-natural-950 text-decoration-none link-primary footer-link ps-4 pe-4">ÊàêÂäüÊ°à‰æã</a>
                            </li>
                        </ul>
                    </div>

                    <!-- Á´ãÂç≥ËøΩËπ§ÂçÄÂ°ä -->
                    <div class="col-lg-3 col-md-6 col-6">
                        <h6 class="text-natural-500 fw-normal pb-4 pe-4 ps-4 mb-2 custom-border fs-14">Á´ãÂç≥ËøΩËπ§</h6>
                        <div class="d-flex gap-4 py-2 px-4">
                            <a href="#"
                                class="text-primary-500 bg-primary-50 icon-radius d-flex justify-content-center align-items-center p-2">
                                <i class="fa-brands fa-facebook fa-lg"></i>
                            </a>
                            <a href="#"
                                class="text-primary-500 bg-primary-50 icon-radius d-flex justify-content-center align-items-center p-2">
                                <i class="ti ti-brand-instagram-filled"></i>
                            </a>
                            <a href="#"
                                class="text-primary-500 bg-primary-50 icon-radius d-flex justify-content-center align-items-center p-2">
                                <i class="fa-brands fa-line fa-lg"></i>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ÁâàÊ¨äËÅ≤Êòé -->
        <div class="row mb-6">
            <div class="col-12 text-center">
                <small class="text-natural-500 bg-natural-50 d-inline-block border-radius py-2 px-4">
                    Copyright¬© SparkFund., LTD. All Rights Reserved
                </small>
            </div>
        </div>
    </div>
</footer>

<!-- ÁáàÁÆ± -->
<div class="lightbox" id="lightbox">
    <div class="lightbox-content">
        <button class="close-button" onclick="closeLightbox()">&times;</button>

        <!-- ÂøóÂ∑•ÊïÖ‰∫ãÁâÜÂÖßÂÆπ -->
        <div class="story-wall">
            <!-- ËÉåÊôØË£ùÈ£æÁ∑öÊ¢ù -->
            <div class="bg-lines">
                <div class="bg-line bg-line-1"></div>
                <div class="bg-line bg-line-2"></div>
                <div class="bg-line bg-line-3"></div>
                <div class="bg-line bg-line-4"></div>
                <div class="bg-line bg-line-5"></div>
            </div>

            <!-- Âè≥ÂÅ¥Âõ∫ÂÆöÈ†ÅÈù¢ÊåáÁ§∫Âô® -->
            <div class="page-indicators d-none d-md-flex" id="pageIndicators">
                <!-- ÂãïÊÖãÁîüÊàê -->
            </div>

            <div class="story-container" id="container">
                <!-- È†ÇÈÉ®Ê®ôÈ°å -->
                <header class="storyheader">
                    <div class="header-decoration">
                        <div class="header-line"></div>
                        <h1 class="header-title">ÂøóÂ∑•ÊïÖ‰∫ãÁâÜ</h1>
                        <div class="header-line"></div>
                    </div>
                    <p class="header-subtitle">VOLUNTEER STORIES</p>
                </header>

                <!-- ‰∏ªË¶ÅÂÖßÂÆπÂçÄ -->
                <div class="content">
                    <!-- Â∑¶ÂÅ¥ÊïÖ‰∫ãÂÖßÂÆπ -->
                    <div class="story-content" id="storyContent">
                        <!-- Á´†ÁØÄÊ®ôÈ°å -->
                        <div class="chapter-title">
                            <div class="chapter-header">
                                <h2 class="chapter-name" id="chapterName"></h2>
                                <span class="chapter-subtitle" id="chapterSubtitle"></span>
                            </div>
                            <div class="chapter-line"></div>
                        </div>

                        <!-- ÂøóÂ∑•Ë≥áË®ä -->
                        <div class="volunteer-info">
                            <div class="volunteer-image" id="volunteerImage"></div>
                            <div>
                                <h3 class="volunteer-name" id="volunteerName"></h3>
                                <p class="volunteer-role" id="volunteerRole"></p>
                            </div>
                        </div>

                        <!-- ÊïÖ‰∫ãÂÖßÂÆπ -->
                        <div class="story-text">
                            <div class="quote-icon">"</div>
                            <p class="story-paragraph" id="storyParagraph"></p>
                            <p class="story-quote" id="storyQuote"></p>
                        </div>

                        <!-- Áµ±Ë®àÊï∏Êìö -->
                        <div class="stats">
                            <div class="stat-item">
                                <div class="stat-icon">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                        stroke-width="2">
                                        <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                                        <circle cx="9" cy="7" r="4"></circle>
                                        <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                                        <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                                    </svg>
                                </div>
                                <p class="stat-value" id="statStudents"></p>
                                <p class="stat-label">‰ΩçÂ≠∏Áîü</p>
                            </div>
                            <div class="stat-item">
                                <div class="stat-icon">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                        stroke-width="2">
                                        <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path>
                                        <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path>
                                    </svg>
                                </div>
                                <p class="stat-value" id="statHours"></p>
                                <p class="stat-label">ÊïôÂ≠∏ÊôÇÊï∏</p>
                            </div>
                            <div class="stat-item">
                                <div class="stat-icon">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                        stroke-width="2">
                                        <path
                                            d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z">
                                        </path>
                                    </svg>
                                </div>
                                <p class="stat-value" id="statYears"></p>
                                <p class="stat-label">Âπ¥Ë≥áÊ≠∑</p>
                            </div>
                        </div>
                    </div>

                    <!-- Âè≥ÂÅ¥ÂúñÁâáÊ°ÜÊû∂ -->
                    <div class="visual-content" id="visualContent">
                        <div class="visual-frame">
                            <!-- Â§ñÊ°Ü -->
                            <div class="frame-outer"></div>
                            <!-- ÂÖßÊ°Ü -->
                            <div class="frame-inner"></div>
                            <!-- ËßíËêΩË£ùÈ£æ -->
                            <div class="frame-corner frame-corner-tl"></div>
                            <div class="frame-corner frame-corner-tr"></div>
                            <div class="frame-corner frame-corner-bl"></div>
                            <div class="frame-corner frame-corner-br"></div>

                            <!-- ‰∏≠ÂøÉÂÖßÂÆπ -->
                            <div class="visual-center">
                                <img src="" alt="Story Image" id="storyImage" class="story-image">
                                <div class="visual-label">
                                </div>
                            </div>

                            <!-- Ë£ùÈ£æÁ∑öÊ¢ù -->
                            <div class="frame-line-h"></div>
                            <div class="frame-line-v"></div>
                        </div>
                    </div>
                </div>

                <!-- Â∫ïÈÉ®Â∞éËà™ÊéßÂà∂ÂçÄ -->
                <div class="navigation-area">
                    <!-- ÊªæÂãïÊèêÁ§∫ -->
                    <div class="scroll-hint d-none d-md-flex" id="scrollHint">
                        <div class="scroll-hint-content">
                            <p class="scroll-text">SCROLL</p>
                            <div class="scroll-line"></div>
                        </div>
                    </div>

                    <!-- Â∫ïÈÉ®Â∞éËà™ -->
                    <div class="navigation">
                        <button class="nav-button" id="prevButton" aria-label="Previous story">
                            <svg class="nav-icon" width="20" height="20" viewBox="0 0 24 24" fill="none"
                                stroke="currentColor" stroke-width="2">
                                <path d="M15 18l-6-6 6-6" />
                            </svg>
                        </button>

                        <div class="page-counter">
                            <span class="page-current" id="pageCurrent">1</span>
                            <span class="page-separator">/</span>
                            <span class="page-total" id="pageTotal">6</span>
                        </div>

                        <button class="nav-button" id="nextButton" aria-label="Next story">
                            <svg class="nav-icon" width="20" height="20" viewBox="0 0 24 24" fill="none"
                                stroke="currentColor" stroke-width="2">
                                <path d="M9 18l6-6-6-6" />
                            </svg>
                        </button>
                    </div>

                    <!-- Â∫ïÈÉ®Ë£ùÈ£æ -->
                    <div class="storyfooter">
                        <div class="footer-decoration">
                            <div class="footer-line"></div>
                            <p class="footer-text">ÊÑõÂøÉÁÑ°Áïå ¬∑ ÊïôËÇ≤ÁÑ°Èôê</p>
                            <div class="footer-line"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    // ÂøóÂ∑•ÊïÖ‰∫ãÊï∏Êìö
    const stories = [
        {
            id: 1,
            title: "ÂàùÂøÉ",
            subtitle: "„ÅØ„Åò„ÇÅ",
            volunteer: "ÊûóÁæéÁé≤",
            role: "Ëã±Ë™ûÊïôÂ≠∏ÂøóÂ∑•",
            story: "Á¨¨‰∏ÄÊ¨°Ë∏èÈÄ≤ÂÅèÈÑâÂ∞èÂ≠∏ÔºåÁúãË¶ãÂ≠©Â≠êÂÄëÊ∏¥ÊúõÂ≠∏ÁøíÁöÑÁúºÁ•ûÔºåÊàëÁü•ÈÅìÈÄôÂ∞±ÊòØÊàëÊÉ≥ÂÅöÁöÑ‰∫ã„ÄÇ",
            quote: "ÊïôËÇ≤‰∏çÊòØÂ°´ÊªøÊ∞¥Ê°∂ÔºåËÄåÊòØÈªûÁáÉÁÅ´ÁÑ∞„ÄÇ",
            image: "üå∏",
            imageUrl: "https://picsum.photos/id/180/767/470",
            stats: { students: 32, hours: 128, years: 2 },
        },
        {
            id: 2,
            title: "ÊàêÈï∑",
            subtitle: "„Åõ„ÅÑ„Å°„Çá„ÅÜ",
            volunteer: "Èô≥ÂøóÊòé",
            role: "Á®ãÂºèË®≠Ë®àÂ∞éÂ∏´",
            story: "Âæû‰∏ÄÂÄãÂÆ≥ÁæûÁöÑÂ∑•Á®ãÂ∏´ÔºåÂà∞ËÉΩÂ§†Á´ôÂú®Ë¨õÂè∞‰∏äÂàÜ‰∫´Áü•Ë≠òÔºåÈÄôÊÆµÊóÖÁ®ãÊîπËÆä‰∫ÜÊàë„ÄÇ",
            quote: "Âú®ÊïôÂ≠∏‰∏≠ÔºåÊàëÂÄë‰∏çÂè™ÊòØËÄÅÂ∏´ÔºåÊõ¥ÊòØÊ∞∏ÈÅ†ÁöÑÂ≠∏Áîü„ÄÇ",
            image: "üåø",
            imageUrl: "https://picsum.photos/id/160/767/470",
            stats: { students: 45, hours: 256, years: 3 },
        },
        {
            id: 3,
            title: "ÊÑüÂãï",
            subtitle: "„Åã„Çì„Å©„ÅÜ",
            volunteer: "ÁéãÈõÖÁê™",
            role: "ÁæéË°ìÂâµ‰ΩúËÄÅÂ∏´",
            story: "Áï∂Â≠∏ÁîüÁ¨¨‰∏ÄÊ¨°ÂÆåÊàê‰ΩúÂìÅÊôÇÁöÑÁ¨ëÂÆπÔºåÊòØÊàëÁπºÁ∫åÂâçÈÄ≤ÁöÑÊúÄÂ§ßÂãïÂäõ„ÄÇ",
            quote: "ËóùË°ìËÆìÂ≠©Â≠êÁúãË¶ã‰∏ñÁïåÁöÑÁæéÂ•ΩÔºå‰πüÁúãË¶ãËá™Â∑±ÁöÑÂèØËÉΩ„ÄÇ",
            image: "üé®",
            imageUrl: "https://picsum.photos/id/184/767/470",
            stats: { students: 28, hours: 96, years: 1 },
        },
        {
            id: 4,
            title: "Â†ÖÊåÅ",
            subtitle: "„Åë„Çì„Åò",
            volunteer: "ÊùéÂª∫ËèØ",
            role: "Êï∏Â≠∏ËºîÂ∞éËÄÅÂ∏´",
            story: "Âç≥‰ΩøÈÅáÂà∞Êå´ÊäòÔºåÁúãÂà∞Â≠∏ÁîüÈÄ≤Ê≠•ÁöÑÈÇ£‰∏ÄÂàªÔºåÊâÄÊúâÁöÑÂä™ÂäõÈÉΩÂÄºÂæó‰∫Ü„ÄÇ",
            quote: "Â†ÖÊåÅ‰∏çÊòØÂõ†ÁÇ∫ÁúãÂà∞Â∏åÊúõÊâçÂ†ÖÊåÅÔºåËÄåÊòØÂ†ÖÊåÅ‰∫ÜÊâçÁúãÂà∞Â∏åÊúõ„ÄÇ",
            image: "üí™",
            imageUrl: "https://picsum.photos/id/188/767/470",
            stats: { students: 38, hours: 180, years: 4 },
        },
        {
            id: 5,
            title: "Â∏åÊúõ",
            subtitle: "„Åç„Åº„ÅÜ",
            volunteer: "ÂºµÊ∑ëËä¨",
            role: "Èñ±ËÆÄÊé®Âª£ÂøóÂ∑•",
            story: "ÊØè‰∏ÄÊú¨Êõ∏ÈÉΩÊòØ‰∏ÄÊâáÁ™óÔºåËÆìÂ≠©Â≠êÂÄëÁúãË¶ãÊõ¥Âª£ÈóäÁöÑ‰∏ñÁïå„ÄÇ",
            quote: "Èñ±ËÆÄÊòØÁµ¶Â≠©Â≠êÊúÄÂ•ΩÁöÑÁ¶ÆÁâ©ÔºåÁü•Ë≠òÊòØ‰ªñÂÄëÈ£õÁøîÁöÑÁøÖËÜÄ„ÄÇ",
            image: "üìö",
            imageUrl: "https://picsum.photos/id/24/767/470",
            stats: { students: 52, hours: 320, years: 5 },
        },
        {
            id: 6,
            title: "ÂÇ≥Êâø",
            subtitle: "„Åß„Çì„Åó„Çá„ÅÜ",
            volunteer: "ÂäâÊ∞∏Á••",
            role: "Ë≥áÊ∑±ÂøóÂ∑•Â∞éÂ∏´",
            story: "ÁúãËëóÊñ∞ÂøóÂ∑•ÂÄëÊàêÈï∑ÔºåÂ∞±ÂÉèÁúãË¶ãËá™Â∑±Áï∂Âπ¥ÁöÑÊ®°Ê®£ÔºåÈÄô‰ªΩÊÑõÊúÉ‰∏ÄÁõ¥ÂÇ≥‰∏ãÂéª„ÄÇ",
            quote: "ÊúÄÂ•ΩÁöÑÂÇ≥Êâø‰∏çÊòØÁµ¶‰∫àÔºåËÄåÊòØÂïüÁôº‰ªñ‰∫∫‰πüÊàêÁÇ∫Áµ¶‰∫àËÄÖ„ÄÇ",
            image: "üåü",
            imageUrl: "https://picsum.photos/id/177/767/470",
            stats: { students: 120, hours: 500, years: 8 },
        },
    ];

    // ÊïÖ‰∫ãÁâÜËÆäÊï∏
    let currentSection = 0;
    let isAnimating = false;
    let isScrolling = false;
    let lastScrollTime = 0;
    let touchStartY = 0;
    let elements = {};

    // ÁáàÁÆ±ÊéßÂà∂ - Â§ñÈÉ®Ë™øÁî®
    
    // ÈñãÂïüÁáàÁÆ±
    function openLightbox() {
        const lightbox = document.getElementById('lightbox');
        if (!lightbox) return;

        lightbox.style.display = 'flex';
        setTimeout(() => {
            lightbox.classList.add('active');
        }, 10);

        if (!window.storyWallInitialized) {
            initStoryWall();
            window.storyWallInitialized = true;
        }
    }
    // ÈóúÈñâÁáàÁÆ±
    function closeLightbox() {
        const lightbox = document.getElementById('lightbox');
        if (!lightbox) return;

        // 1. Âä†ÂÖ• .closing ÁãÄÊÖã
        lightbox.classList.add('closing');
        // 2. ÁßªÈô§ activeÔºàÈñãÂßãÁ∏ÆÂ∞èÂãïÁï´Ôºâ
        lightbox.classList.remove('active');
        // 3. Áõ£ËÅΩÂãïÁï´ÂÆåÁï¢ÂæåÊâçÈö±Ëóè
        const lightboxContent = lightbox.querySelector('.lightbox-content');
        if (lightboxContent) {
            lightboxContent.addEventListener('animationend', function handler() {
                lightbox.style.display = 'none';
                lightbox.classList.remove('closing');
                // ÁßªÈô§Áõ£ËÅΩÔºåÈÅøÂÖçÈáçË§á
                lightboxContent.removeEventListener('animationend', handler);
            });
        }
    }

    // ÂàùÂßãÂåñDOMÂÖÉÁ¥†
    function initElements() {
        elements = {
            chapterName: document.querySelector("#chapterName"),
            chapterSubtitle: document.querySelector("#chapterSubtitle"),
            volunteerImage: document.querySelector("#volunteerImage"),
            volunteerName: document.querySelector("#volunteerName"),
            volunteerRole: document.querySelector("#volunteerRole"),
            storyParagraph: document.querySelector("#storyParagraph"),
            storyQuote: document.querySelector("#storyQuote"),
            statStudents: document.querySelector("#statStudents"),
            statHours: document.querySelector("#statHours"),
            statYears: document.querySelector("#statYears"),
            pageCurrent: document.querySelector("#pageCurrent"),
            pageTotal: document.querySelector("#pageTotal"),
            scrollHint: document.querySelector("#scrollHint"),
            storyContent: document.querySelector("#storyContent"),
            visualContent: document.querySelector("#visualContent"),
            pageIndicators: document.querySelector("#pageIndicators"),
            prevButton: document.querySelector("#prevButton"),
            nextButton: document.querySelector("#nextButton"),
            container: document.querySelector("#container"),
        };
    }

    function preloadImages() {
        stories.forEach((story) => {
            const img = new Image();
            img.src = story.imageUrl;
        });
    }

    function initStoryWall() {
        initElements();
        createPageIndicators();
        preloadImages();
        updateContent();
        bindEvents();
        if (elements.pageTotal) {
            elements.pageTotal.textContent = stories.length;
        }
    }

    function createPageIndicators() {
        if (!elements.pageIndicators) return;

        elements.pageIndicators.innerHTML = "";
        stories.forEach((story, index) => {
            const indicator = document.createElement("button");
            indicator.className = "indicator";
            indicator.setAttribute("aria-label", `Go to story ${index + 1}`);
            indicator.innerHTML = `
            <div class="indicator-dot"></div>
            <span class="indicator-label">${story.title}</span>
        `;
            indicator.addEventListener("click", () => handleSectionChange(index));
            elements.pageIndicators.appendChild(indicator);
        });
    }

    function updateContent() {
        const story = stories[currentSection];

        if (elements.chapterName) elements.chapterName.textContent = story.title;
        if (elements.chapterSubtitle) elements.chapterSubtitle.textContent = story.subtitle;
        if (elements.volunteerImage) elements.volunteerImage.textContent = story.image;
        if (elements.volunteerName) elements.volunteerName.textContent = story.volunteer;
        if (elements.volunteerRole) elements.volunteerRole.textContent = story.role;
        if (elements.storyParagraph) elements.storyParagraph.textContent = story.story;
        if (elements.storyQuote) elements.storyQuote.textContent = `‚Äî ${story.quote}`;
        if (elements.statStudents) elements.statStudents.textContent = story.stats.students;
        if (elements.statHours) elements.statHours.textContent = story.stats.hours;
        if (elements.statYears) elements.statYears.textContent = story.stats.years;
        if (elements.pageCurrent) elements.pageCurrent.textContent = currentSection + 1;

        const storyImage = document.querySelector("#storyImage");
        if (storyImage && story.imageUrl) {
            storyImage.style.opacity = "0.3";

            let loadingElement = document.querySelector(".image-loading");
            if (!loadingElement) {
                loadingElement = document.createElement("div");
                loadingElement.className = "image-loading";
                loadingElement.innerHTML = `
            <div class="loading-spinner"></div>
            <div class="loading-text">ËºâÂÖ•‰∏≠...</div>
        `;
                loadingElement.style.cssText = `
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
            z-index: 10;
        `;

                storyImage.parentElement.style.position = "relative";
                storyImage.parentElement.appendChild(loadingElement);
            }
            loadingElement.style.display = "flex";

            const tempImg = new Image();
            tempImg.onload = function () {
                storyImage.src = this.src;
                storyImage.style.opacity = "1";
                loadingElement.style.display = "none";
            };
            tempImg.onerror = function () {
                storyImage.style.opacity = "1";
                loadingElement.querySelector(".loading-text").textContent = "ËºâÂÖ•Â§±Êïó";
                loadingElement.querySelector(".loading-spinner").style.display = "none";
                setTimeout(() => {
                    loadingElement.style.display = "none";
                }, 2000);
            };
            tempImg.src = story.imageUrl;
            storyImage.alt = `${story.title} - ${story.volunteer}`;
        }

        updatePageIndicators();

        if (elements.scrollHint) {
            if (currentSection === 0) {
                elements.scrollHint.classList.remove("hidden");
            } else {
                elements.scrollHint.classList.add("hidden");
            }
        }
    }

    function updatePageIndicators() {
        if (!elements.pageIndicators) return;

        const indicators = elements.pageIndicators.querySelectorAll(".indicator");
        indicators.forEach((indicator, index) => {
            if (index === currentSection) {
                indicator.classList.add("active");
            } else {
                indicator.classList.remove("active");
            }
        });
    }

    function handleSectionChange(index) {
        if (isAnimating || isScrolling) return;

        const newIndex = Math.max(0, Math.min(stories.length - 1, index));

        if (newIndex === currentSection) return;

        isAnimating = true;

        if (elements.storyContent) elements.storyContent.classList.add("animating");
        if (elements.visualContent) elements.visualContent.classList.add("animating");

        setTimeout(() => {
            currentSection = newIndex;
            updateContent();

            setTimeout(() => {
                if (elements.storyContent) elements.storyContent.classList.remove("animating");
                if (elements.visualContent) elements.visualContent.classList.remove("animating");
                isAnimating = false;
            }, 100);
        }, 300);
    }

    function handlePrev() {
        const newIndex = currentSection === 0 ? stories.length - 1 : currentSection - 1;
        handleSectionChange(newIndex);
    }

    function handleNext() {
        const newIndex = currentSection === stories.length - 1 ? 0 : currentSection + 1;
        handleSectionChange(newIndex);
    }

    function handleWheel(e) {
        const lightbox = document.getElementById('lightbox');
        if (!lightbox || !lightbox.classList.contains('active')) return;

        e.preventDefault();
        e.stopPropagation();

        const now = Date.now();
        if (now - lastScrollTime < 500) return;

        if (isScrolling || isAnimating) return;

        lastScrollTime = now;

        if (e.deltaY > 0) {
            handleNext();
        } else {
            handlePrev();
        }
    }

    function handleKeydown(e) {
        const lightbox = document.getElementById('lightbox');
        if (!lightbox || !lightbox.classList.contains('active')) return;

        if (isAnimating || isScrolling) return;

        switch (e.key) {
            case "ArrowLeft":
            case "ArrowUp":
                e.preventDefault();
                handlePrev();
                break;
            case "ArrowRight":
            case "ArrowDown":
                e.preventDefault();
                handleNext();
                break;
            case "Escape":
                e.preventDefault();
                closeLightbox();
                break;
        }
    }

    function handleTouchStart(e) {
        touchStartY = e.touches[0].clientY;
    }

    function handleTouchEnd(e) {
        if (isAnimating || isScrolling) return;

        const touchEndY = e.changedTouches[0].clientY;
        const diff = touchStartY - touchEndY;

        if (Math.abs(diff) > 50) {
            if (diff > 0) {
                handleNext();
            } else {
                handlePrev();
            }
        }
    }

    function bindEvents() {
        if (elements.prevButton) elements.prevButton.addEventListener("click", handlePrev);
        if (elements.nextButton) elements.nextButton.addEventListener("click", handleNext);

        window.addEventListener("wheel", handleWheel, { passive: false });
        document.addEventListener("wheel", handleWheel, { passive: false });
        if (elements.container) {
            elements.container.addEventListener("wheel", handleWheel, { passive: false });
        }

        document.addEventListener("keydown", handleKeydown);

        if (elements.container) {
            elements.container.addEventListener("touchstart", handleTouchStart, { passive: true });
            elements.container.addEventListener("touchend", handleTouchEnd, { passive: true });
        }

        const lightbox = document.getElementById('lightbox');
        if (lightbox) {
            lightbox.addEventListener('click', function (e) {
                if (e.target === this) {
                    closeLightbox();
                }
            });
        }
    }

    // Â∞áÂáΩÊï∏Êö¥Èú≤Âà∞ÂÖ®ÂüüÔºå‰æõheaderË™øÁî®
    window.openLightbox = openLightbox;
    window.closeLightbox = closeLightbox;
</script>
  </body>
</html>
